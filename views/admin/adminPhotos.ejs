<%- include('../partials/header'); -%>

    <div class="pb-3 mb-3 d-flex border-bottom container">
        <h4 class="m-0 p-0 me-1"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="145" height="57" viewBox="0 0 145 57">
            <defs>
              <filter id="Path_42" x="19.609" y="15.756" width="25.783" height="25.783" filterUnits="userSpaceOnUse">
                <feOffset dx="-3" dy="1" input="SourceAlpha"/>
                <feGaussianBlur stdDeviation="3.5" result="blur"/>
                <feFlood flood-opacity="0.659" result="color"/>
                <feComposite operator="out" in="SourceGraphic" in2="blur"/>
                <feComposite operator="in" in="color"/>
                <feComposite operator="in" in2="SourceGraphic"/>
              </filter>
            </defs>
            <g id="Group_324" data-name="Group 324" transform="translate(7884 -7690)">
              <path id="Path_94" data-name="Path 94" d="M0,0H145V57H0Z" transform="translate(-7739 7747) rotate(180)" fill="none"/>
              <path id="Path_95" data-name="Path 95" d="M8,0H29a8,8,0,0,1,8,8V29a8,8,0,0,1-8,8H8a8,8,0,0,1-8-8V8A8,8,0,0,1,8,0Z" transform="translate(-7870 7700)" fill="#fff"/>
              <g data-type="innerShadowGroup">
                <path id="Path_42-2" data-name="Path 42" d="M30.783,28.029V8.754A2.753,2.753,0,0,0,28.029,6H8.754A2.753,2.753,0,0,0,6,8.754V28.029a2.753,2.753,0,0,0,2.754,2.754H28.029A2.753,2.753,0,0,0,30.783,28.029Zm-17.21-7.572,3.442,4.137,4.819-6.2,6.2,8.261H8.754Z" transform="translate(-7869.891 7700.256)" fill="#458ccb"/>
                <g transform="matrix(1, 0, 0, 1, -7884, 7690)" filter="url(#Path_42)">
                  <path id="Path_42-3" data-name="Path 42" d="M30.783,28.029V8.754A2.753,2.753,0,0,0,28.029,6H8.754A2.753,2.753,0,0,0,6,8.754V28.029a2.753,2.753,0,0,0,2.754,2.754H28.029A2.753,2.753,0,0,0,30.783,28.029Zm-17.21-7.572,3.442,4.137,4.819-6.2,6.2,8.261H8.754Z" transform="translate(14.11 10.26)" fill="#fff"/>
                </g>
                <path id="Path_42-4" data-name="Path 42" d="M30.783,28.029V8.754A2.753,2.753,0,0,0,28.029,6H8.754A2.753,2.753,0,0,0,6,8.754V28.029a2.753,2.753,0,0,0,2.754,2.754H28.029A2.753,2.753,0,0,0,30.783,28.029Zm-17.21-7.572,3.442,4.137,4.819-6.2,6.2,8.261H8.754Z" transform="translate(-7869.891 7700.256)" fill="none" stroke="#fff" stroke-width="1"/>
              </g>
              <path id="Path_93" data-name="Path 93" d="M10.982-9.158a4.13,4.13,0,0,1-.5,1.995A3.7,3.7,0,0,1,8.9-5.662a5.736,5.736,0,0,1-2.707.57H3.971V0H1.311V-13.262H6.194a5.9,5.9,0,0,1,2.622.532,3.706,3.706,0,0,1,1.625,1.463A4.117,4.117,0,0,1,10.982-9.158ZM6.08-7.239a2.305,2.305,0,0,0,1.634-.5,1.855,1.855,0,0,0,.532-1.416q0-1.938-2.166-1.938H3.971v3.857Zm12.711-3.439a4.273,4.273,0,0,1,2.128.522,3.6,3.6,0,0,1,1.454,1.539A5.284,5.284,0,0,1,22.9-6.175V0h-2.66V-5.814a2.729,2.729,0,0,0-.627-1.928,2.221,2.221,0,0,0-1.71-.674,2.275,2.275,0,0,0-1.738.674,2.7,2.7,0,0,0-.636,1.928V0h-2.66V-14.06h2.66v4.845a3.468,3.468,0,0,1,1.368-1.073A4.53,4.53,0,0,1,18.791-10.678ZM30.1.171A5.544,5.544,0,0,1,27.36-.5a4.857,4.857,0,0,1-1.91-1.91,5.722,5.722,0,0,1-.694-2.85,5.6,5.6,0,0,1,.712-2.85,4.951,4.951,0,0,1,1.948-1.909,5.652,5.652,0,0,1,2.755-.675,5.652,5.652,0,0,1,2.755.675,4.951,4.951,0,0,1,1.947,1.909,5.6,5.6,0,0,1,.712,2.85,5.486,5.486,0,0,1-.731,2.85A5.065,5.065,0,0,1,32.88-.5,5.746,5.746,0,0,1,30.1.171Zm0-2.318A2.767,2.767,0,0,0,31.455-2.5a2.555,2.555,0,0,0,1.017-1.055,3.554,3.554,0,0,0,.38-1.71,3.169,3.169,0,0,0-.788-2.308,2.592,2.592,0,0,0-1.928-.808,2.531,2.531,0,0,0-1.91.808,3.216,3.216,0,0,0-.77,2.308,3.267,3.267,0,0,0,.75,2.309A2.471,2.471,0,0,0,30.1-2.147ZM40.641-8.341v5.092a1.006,1.006,0,0,0,.257.77,1.26,1.26,0,0,0,.864.237H43V0H41.325q-3.363,0-3.363-3.268V-8.341H36.708v-2.185h1.254v-2.6h2.679v2.6H43v2.185ZM49.59.171A5.544,5.544,0,0,1,46.854-.5a4.857,4.857,0,0,1-1.91-1.91,5.722,5.722,0,0,1-.694-2.85,5.6,5.6,0,0,1,.713-2.85,4.951,4.951,0,0,1,1.947-1.909,5.652,5.652,0,0,1,2.755-.675,5.652,5.652,0,0,1,2.755.675,4.951,4.951,0,0,1,1.948,1.909,5.6,5.6,0,0,1,.713,2.85,5.486,5.486,0,0,1-.732,2.85A5.065,5.065,0,0,1,52.373-.5,5.746,5.746,0,0,1,49.59.171Zm0-2.318A2.767,2.767,0,0,0,50.949-2.5a2.555,2.555,0,0,0,1.016-1.055,3.554,3.554,0,0,0,.38-1.71,3.169,3.169,0,0,0-.789-2.308,2.592,2.592,0,0,0-1.929-.808,2.531,2.531,0,0,0-1.91.808,3.216,3.216,0,0,0-.77,2.308A3.267,3.267,0,0,0,47.7-2.954,2.471,2.471,0,0,0,49.59-2.147ZM61.066.171a5.55,5.55,0,0,1-2.318-.465,4.1,4.1,0,0,1-1.625-1.264,3.2,3.2,0,0,1-.655-1.767h2.679a1.459,1.459,0,0,0,.6,1.007,2.082,2.082,0,0,0,1.3.4,2.021,2.021,0,0,0,1.188-.3A.92.92,0,0,0,62.662-3a.821.821,0,0,0-.523-.77,9.832,9.832,0,0,0-1.662-.56,14.089,14.089,0,0,1-1.929-.589,3.348,3.348,0,0,1-1.292-.931,2.5,2.5,0,0,1-.542-1.691,2.729,2.729,0,0,1,.5-1.6,3.38,3.38,0,0,1,1.444-1.14,5.413,5.413,0,0,1,2.213-.418,4.52,4.52,0,0,1,3,.941A3.484,3.484,0,0,1,65.113-7.22H62.567a1.378,1.378,0,0,0-.522-1A1.942,1.942,0,0,0,60.8-8.588a1.961,1.961,0,0,0-1.112.266.848.848,0,0,0-.389.741.871.871,0,0,0,.532.807,8.261,8.261,0,0,0,1.653.561,14.031,14.031,0,0,1,1.881.589,3.323,3.323,0,0,1,1.282.941A2.583,2.583,0,0,1,65.208-3a2.788,2.788,0,0,1-.5,1.634,3.317,3.317,0,0,1-1.444,1.13A5.471,5.471,0,0,1,61.066.171Z" transform="translate(-7823 7725)" fill="#0e0f10"/>
            </g>
          </svg>
          </h4>
        <h5 class="m-0 p-0"> (<%= count %>)</h5>
    </div>
    <div class="container admin-user-table">

        <table class="table table-striped table-hover table-responsive">
            <thead>
                <tr>
                    <th scope="col">Photo ID</th>
                    <th scope="col">Thumbnail</th>
                    <th scope="col">Aperture Value</th>
                    <th scope="col">Exposure Time</th>
                    <th scope="col">Exposure Value</th>
                    <th scope="col">Base Value</th>
                </tr>
            </thead>
            <tbody class="">
                <% for (let data of datas) { %>

                    <tr class="position-relative">
                        <td scope="row">
                            <%= data.id %>
                        </td>
                        <td>
                            <img src="<%= data.imageUrl %>" alt="" style="width: 100px;">
                        </td>
                        <td>
                            <%= data.av %>
                        </td>
                        <td>
                            <%= data.tv %>
                        </td>
                        <td>
                            <%= data.ev %>
                        </td>
                        <td><%= data.sp %></td>
                    </tr>

                    <% } %>
            </tbody>
        </table>
    </div>

    <button id="downloadButton" class="btn btn-primary mt-3">Download CSV</button>

    <script>
        const downloadButton = document.getElementById('downloadButton');
        downloadButton.addEventListener('click', async (e) => {
            e.preventDefault();
            const response = await fetch('/export/photos.csv');
            const blob = await response.blob();
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'photos.csv';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        });
    </script>

    <%- include('../partials/footer'); -%>
